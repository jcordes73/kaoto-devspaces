schemaVersion: 2.2.0
metadata:
  name: kaoto
attributes:
  controller.devfile.io/devworkspace-config:
    name: devworkspace-config
    namespace: openshift-operators
  controller.devfile.io/scc: container-build
  controller.devfile.io/storage-type: per-workspace
components:
  - container:
      cpuLimit: 2000m
      cpuRequest: 500m
      image: registry.redhat.io/devspaces/udi-rhel8:latest
      memoryLimit: 2G
      sourceMapping: /projects
    name: tools
commands:
  - exec:
      commandLine: curl -Ls https://sh.jbang.dev | bash -s - app setup
      component: che-code-injector
    id: install-jbang
  - exec:
      commandLine: jbang app install camel@apache/camel
      component: che-code-injector
    id: install-camel-jbang
  - exec:
      commandLine: code-oss --install-extension redhat.apache-camel-extension-pack
      component: che-code-injector
    id: install-apache-camel-extension
  - exec:
      commandLine: code-oss --install-extension redhat.vscode-kaoto
      component: che-code-injector
    id: install-kaoto-extension
events:
  postStart:
    - install-jbang
    - install-camel-jbang
    - install-apache-camel-extension
    - install-kaoto-extension 
